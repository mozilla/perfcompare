name: Pull Request Action
on:
  schedule:
    - cron: '5 * * * *'
      
jobs:
  create-pull-request:
    runs-on: ubuntu-latest
    steps:
      - name: Get current date
        id: date
        run: echo "::set-output name=date::$(date +'%Y-%m-%d')"
      - name: Weekly Release PR
        id: wr
        uses: peter-evans/create-pull-request@v4
        with:
          token: ${{ secrets.PAT }}
          commit-message: 'Weekly release ${{ steps.date.outputs.date }}'
          committer: GitHub <noreply@github.com>
          author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
          signoff: false
          branch: staging
          delete-branch: false
          title: 'Weekly release ${{ steps.date.outputs.date }}'
          body: |
            Merge staging to master
            - Auto-generated by [create-pull-request][1]

            [1]: https://github.com/peter-evans/create-pull-request
          reviewers: kimberlythegeek
          team-reviewers: |
            owners
            maintainers
          milestone: 1
